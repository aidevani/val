!function(){"use strict";let t=null,e=!1,a=null,i={},o={},n=null,r=!1;async function l(){try{n=await async function(){try{const t=window.location.hostname,e=o.a,a=await fetch("https://autoleadsai.com/embed/api/jwt.ai",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({a:e,d:t})});if(!a.ok)throw new Error(`HTTP error! status: ${a.status}`);return(await a.text()).trim()}catch(t){return console.error("AutoLeadsAI: Error fetching JWT token:",t),null}}(),n?(t=AutoLeadsAIHelper.createAutoLeadsAI(n),r=!0,console.log("AutoLeadsAI: Instance ready")):console.error("AutoLeadsAI: Failed to get JWT token")}catch(t){console.error("AutoLeadsAI: Error initializing instance:",t)}}function s(){i.form.style.display="none",i.ob.style.display="flex",i.ff.classList.remove("hidden"),i.sd.innerHTML="",e=!1}function d(){c("Request could not be made",!0),i.ff.classList.remove("hidden"),e=!1}function c(t,e=!1){i.sd.innerHTML=e?`<div class="alai-status-text">${t}</div>`:`<div class="alai-loader"></div><div class="alai-status-text">${t}</div>`}o=function(){const t=document.currentScript;if(!t)return console.error("AutoLeadsAI: Missing Script Tag."),{t:"Incomplete Configuration",s:"Integration Error: Missing some required attributes.",c:"#ff0000",p:"bottom-right",f:[],scb:!1,ft:"Integration Error",err:!0};const e={a:t.getAttribute("data-agent-id"),t:t.getAttribute("data-title")||"Have a question?",s:t.getAttribute("data-subtitle")||"Talk to Us",c:t.getAttribute("data-color")||"#007bff",p:t.getAttribute("data-position")||"bottom-right",f:(t.getAttribute("data-fields")||"").split(",").filter(Boolean),scb:"true"===t.getAttribute("data-callback"),ft:t.getAttribute("data-form-title")||"AI is live",err:!1};return e.a||e.scb?(e.scb&&!e.f.includes("phone")&&e.f.push("phone"),e):(console.error("AutoLeadsAI: Missing Agent ID."),e.c="#ff0000",e.t="Incorrect Configuration",e.s="Error: Missing Agent ID & Callback",e.err=!0,e)}(),o.a&&function(){const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/gh/aidevani/val@main/alai.v1.js",t.defer=!0,t.async=!0,t.onload=function(){l()},t.onerror=function(){console.error("AutoLeadsAI: Failed to load alai.js")},document.head.appendChild(t)}(),function(t){a=document.createElement("div"),a.id="alai-widget",a.innerHTML=function(t){return`\n            ${function(t){return`<style>#alai-widget {position: fixed;${function(t){const e={"bottom-right":"bottom: 20px; right: 20px;","bottom-left":"bottom: 20px; left: 20px;","top-right":"top: 20px; right: 20px;","top-left":"top: 20px; left: 20px;",top:"top: 20px; left: 50%; transform: translateX(-50%);",bottom:"bottom: 20px; left: 50%; transform: translateX(-50%);",left:"top: 50%; left: 20px; transform: translateY(-50%);",right:"top: 50%; right: 20px; transform: translateY(-50%);"};return e[t]||e["bottom-right"]}(t.p)}z-index: 99999;font-family: Arial, sans-serif;}.alai-button {background: white;border-radius: 50px;box-shadow: 0 2px 8px rgba(0,0,0,0.15);padding: 10px 16px 10px 10px;display: flex;align-items: center;gap: 14px;cursor: pointer;}.alai-icon {background: ${t.c};color: white;border-radius: 50%;padding: 8px;display: flex;align-items: center;justify-content: center;}.alai-text {display: flex;flex-direction: column;}.alai-title {font-weight: bold;font-size: 14px;}.alai-subtitle {font-size: 12px;color: #555;}.alai-form {display: none;flex-direction: column;background: white;padding: 16px;box-shadow: 0 2px 12px rgba(0,0,0,0.2);border-radius: 10px;margin-top: 8px;position: relative;min-width: 280px;}.alai-header {display: flex;justify-content: space-between;align-items: center;margin-bottom: 16px;padding-bottom: 8px;border-bottom: 1px solid #f0f0f0;}.alai-header-title {font-size: 16px;font-weight: 600;color: #333;}.alai-input {margin-bottom: 10px;padding: 8px;font-size: 14px;border: 1px solid #ccc;border-radius: 6px;}.alai-button-action {background: ${t.c};color: white;padding: 10px;font-size: 14px;border: none;border-radius: 6px;cursor: pointer;margin-bottom: 10px;}.alai-close {cursor: pointer;font-size: 18px;font-weight: bold;color: #666;width: 24px;height: 24px;display: flex;align-items: center;justify-content: center;border-radius: 50%;transition: all 0.2s ease;}.alai-close:hover {background-color: #f0f0f0;color: #333;}.alai-powered {text-align: center;font-size: 11px;color: #888;margin-top: 10px;cursor: pointer;}.alai-powered b {color: black;}.alai-status {display: flex;flex-direction: column;align-items: center;margin-top: 10px;}.alai-loader {border: 4px solid #f3f3f3;border-top: 4px solid ${t.c};border-radius: 50%;width: 24px;height: 24px;animation: spin 1s linear infinite;}.alai-status-text {margin-top: 8px;font-size: 14px;color: #333;}.alai-form-fields {display: flex;flex-direction: column;}.alai-form-fields.hidden {display: none;}@keyframes spin {0% { transform: rotate(0deg); }100% { transform: rotate(360deg); }}</style>`}(t)}\n            ${function(t){return`<div class="alai-button"><div class="alai-icon">${e=t.err,e?'<svg width="20px" height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff"><g id="bgCarrier" stroke-width="0"/><g id="tracerCarrier" stroke-linecap="round" stroke-linejoin="round"/><g id="iconCarrier"> <path d="M12.5 16V14.5M12.5 9V13M20.5 12.5C20.5 16.9183 16.9183 20.5 12.5 20.5C8.08172 20.5 4.5 16.9183 4.5 12.5C4.5 8.08172 8.08172 4.5 12.5 4.5C16.9183 4.5 20.5 8.08172 20.5 12.5Z" stroke="#ffffff" stroke-width="1.2"/> </g></svg>':'<svg xmlns="http://www.w3.org/2000/svg" fill="white" height="20" width="20" viewBox="0 0 24 24"><path d="M6.6 10.8c1.6 3.3 4.3 6 7.6 7.6l2.5-2.5c.3-.3.7-.4 1.1-.3 1.2.3 2.5.5 3.8.5.6 0 1 .5 1 1v4c0 .6-.4 1-1 1C10.1 23 1 13.9 1 2c0-.6.4-1 1-1h4c.6 0 1 .4 1 1 0 1.3.2 2.6.5 3.8.1.4 0 .8-.3 1.1L6.6 10.8z"/></svg>'}</div><div class="alai-text"><div class="alai-title">${t.t}</div><div class="alai-subtitle">${t.s}</div></div></div>`;var e}(t)}\n            ${function(t){return`<div class="alai-form"><div class="alai-header"><div class="alai-header-title">${t.ft}</div><div class="alai-close">Ã—</div></div><div class="alai-form-fields">${function(t){const e={name:'<input class="alai-input" name="n" placeholder="Name">',email:'<input class="alai-input" name="e" placeholder="Email">',phone:'<input class="alai-input" name="p" minlength="10" type="tel" maxlength="10" placeholder="Mobile No.">'};return t.f.filter((t=>e[t])).map((t=>e[t])).join("")}(t)}${function(t){let e="";return t.a&&(e+='<button class="alai-button-action" data-action="start">Start Call</button>'),t.scb&&(e+='<button class="alai-button-action" data-action="callback">Request Callback</button>'),e}(t)}</div><div class="alai-status"></div><div class="alai-powered" onclick="window.open('https://autoleadsai.com', '_blank')">âš¡ powered by <b>AutoLeadsAI</b></div></div>`}(t)}\n        `}(t),document.body.appendChild(a),t.err||(i={widget:a,ob:a.querySelector(".alai-button"),form:a.querySelector(".alai-form"),cb:a.querySelector(".alai-close"),in:a.querySelectorAll(".alai-input"),sd:a.querySelector(".alai-status"),ff:a.querySelector(".alai-form-fields"),ab:a.querySelectorAll(".alai-button-action")})}(o),o.err||(i.ob.addEventListener("click",(()=>{i.form.style.display="flex",i.ob.style.display="none",i.in.length>0&&i.in[0].focus()})),i.cb.addEventListener("click",(t=>{t.stopPropagation(),s()})),i.ab.forEach((a=>{a.addEventListener("click",(()=>{!function(a){const p=a.getAttribute("data-action"),u=function(){const t=window.location.hostname,e={a:o.a,d:t};return i.in.forEach((t=>{e[t.name]=t.value.trim()})),e}();var f;f=u,(Object.entries(f).filter((([t])=>"a"!==t)).some((([,t])=>!t))?(alert("Please fill the necessary fields."),0):f.p&&!/^[0-9]{10}$/.test(f.p)?(alert("Please enter a valid phone number."),0):!f.e||/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.e)||(alert("Please enter a valid email address."),0))&&(e=!0,function(t){i.ff.classList.add("hidden");const e="callback"===t?"Requesting Callback":"Initiating the call";c(e,!1)}(p),function(a,p){const u="callback"===p?"https://autoleadsai.com/embed/api/callback.ai":"https://autoleadsai.com/embed/api/call.ai";fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((t=>t.text())).then((a=>{!function(a,p){"OK"===a.trim().toUpperCase()?"callback"===p?c("Thanks! We will call you soon.",!0):async function(){r&&t&&(!function(t){const[e,a,i]=t.split("."),o=JSON.parse(atob(a)),n=Math.floor(Date.now()/1e3);return console.log("currentTime",n),console.log("decodedPayload.exp",o.exp),o.exp<n}(n)||(console.log("JWT expired"),await l(),r&&t))?(t.start(o.a),t.on("call-start",(()=>{i.sd.innerHTML='<div style="text-align:center; margin: 10px 0;">ðŸ“ž Call in Progress...</div><button id="alai-end-call" style="background: red; color: white; padding: 8px; border: none; border-radius: 6px; cursor: pointer;">End Call</button>',i.sd.addEventListener("click",(e=>{"alai-end-call"===e.target.id&&t.stop()}))})),t.on("call-end",(()=>{s()})),t.on("error",(t=>{console.error("AutoLeadsAI: Error:",t),c("An error occurred. Please refresh the page.",!0)}))):(c("Call service not ready. Please reload the page.",!0),i.ff.classList.remove("hidden"),e=!1)}():d()}(a,p)})).catch((()=>{d()}))}(u,p))}(a)}))})),document.addEventListener("click",(t=>{"flex"!==i.form.style.display||e||i.widget.contains(t.target)||s()})),i.widget.addEventListener("click",(t=>{t.stopPropagation()})))}();